# grug for C

This repository provides a C implementation of grug, including the frontend, interpreter backend, and bindings.

The library is packaged as a single grug.c + grug.h pair, and the recommended way to install grug into your project is to copy those source files into your own project. For now they are written as-is, but shortly into the future that file will be generated by a program as an amalgamated build. After that point, grug should also function in the non-amalgam form.

## Example
TODO currently in test.c

animals/labrador-Dog.grug
```py
on_bark(sound: string) {
    print_string(sound)

    # Print "arf" a second time
    if sound == "arf" {
        print_string(sound)
    }
}
```

## API feature requirements
- round-trip grug file -> tokens -> json -> tokens - > grug file,
- unwinding the grug stack,
- error handling, for compile-time, runtime, and game errors,
- safe mode v.s fast mode,
- switching out the backend at runtime,
- getting the id and script of an entity from the script handle
- when a script fails to compile
- when a script doesn't have an on fn that the game tries to get and call
- replace the alloc function pointers with macro defines instead

## options

Here are your options as someone compiling grug:
- GRUG_NUMBER: the type to use for numbers, double if undefined
- GRUG_NO_NUMBER: define this if you don't want / can't have numbers
- GRUG_BOOL: the type to use for booleans, bool if undefined
- GRUG_NO_BOOL: define this if you don't want / can't have bools
- GRUG_STRING: the type to use for strings, char const* if undefined
- GRUG_NO_STRING: define this if you don't want / can't have strings
- GRUG_ID: the type to use for ids, uint64_t if undefined
- GRUG_NO_ID: define this if you don't want / can't have ids, note that GRUG_ID still applies for instances of scripts
 - GRUG_ON_FN_ID: the type to use for on_fn ids, uint64_t if undefined


