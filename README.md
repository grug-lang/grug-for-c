# grug for C

This repository provides a C implementation of grug, including the frontend, interpreter backend, and bindings.

The library is packaged as a single grug.c + grug.h pair, and the recommended way to install grug into your project is to copy those source files into your own project. For now they are written as-is, but shortly into the future that file will be generated by a program as an amalgamated build. After that point, grug should also function in the non-amalgam form.

## Example
TODO currently in test.c

animals/labrador-Dog.grug
```py
on_bark(sound: string) {
    print_string(sound)

    # Print "arf" a second time
    if sound == "arf" {
        print_string(sound)
    }
}
```

## API feature requirements
- round-trip grug file -> tokens -> json -> tokens - > grug file,
- unwinding the grug stack,
- error handling, for compile-time, runtime, and game errors,
- safe mode v.s fast mode,
- switching out the backend at runtime,

## options

Here are your options as someone compiling grug:
- GRUG_MALLOC_HEADER: optional, a header file to include in grug.c to replace allocation functions
- GRUG_MALLOC: optional, a malloc() function to use with the same arguments as libc malloc
- GRUG_FREE: optional, a free() function to use. Has the signiture "void free(void* ptr, size_t len)", so your allocator doesn't need to necessarily store the size for each allocation.


